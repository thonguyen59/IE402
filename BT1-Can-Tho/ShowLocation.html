<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS JavaScript Tutorials: Create a Starter App</title>
    <style>
        html, body, #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>

    <link rel="stylesheet" href="https://js.arcgis.com/4.15/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.15/"></script>
    <script src="data.js"></script>

    <script>
      var point_template_tree = {
        title: "{Name}",
        content: "Cây này ở <b>{Location}</b>."
      };
      var point_template_light = {
        title: "{Name}",
        content: "Bóng đèn này ở <b>{Location}</b>."
      };
      var point_template_chair = {
        title: "{Name}",
        content: "Cái ghế này ở <b>{Location}</b>."
      };
      var point_template_area = {
        title: "{Name}",
        content: "Khu vực này ở <b>{Location}</b>."
      };
      var point_template_university = {
        title: "{Name}",
        content: "Trường ở <b>{Location}</b>."
      };
      var jsondata = {
        "points":[
          {
            type: "point",
            longitude: 106.7986823851482,
            latitude: 10.876185156455417,
            Name: "Cây xanh 01",
            Location: "trong khuông viên trường ĐH KHTN",
            symbol: {
              type: "simple-marker",
              color: [0, 153, 51],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_tree
          },
          {
            type: "point",
            longitude: 106.79597871846113,
            latitude: 10.872455347930213,
            Name: "Bóng Đèn 01",
            Location: "trong khuông viên trường ĐH TDTT",
            symbol: {
              type: "simple-marker",
              color: [255, 204, 0],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_light
          },
          {
            type: "point",
            longitude: 106.80378931111271,
            latitude: 10.870369163501929,
            Name: "Ghế ngồi",
            Location: "trong khuông viên trường ĐH CNTT",
            symbol: {
              type: "simple-marker",
              color: [153, 51, 51],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_chair
          }
        ],
        "lines":[
          {
            type: "polyline",
            paths: [
              [106.79134386128325, 10.866997521468168],
              [106.79413335865881, 10.865395978158253],
              [106.79833906239429, 10.864637349380688],
              [106.80366056507997, 10.867882581189418],
              [106.8083812529463, 10.873403608756607],
              [106.80511968678411, 10.875552988801912],
              [106.80318849629333, 10.876522311989321],
              [106.80074232167169, 10.876522311989321],
              [106.79949777668874, 10.878798101871515],
              [106.79675119465743, 10.878882390052073],
              [106.78988473957912, 10.875637277899806],
              [106.79134386128325, 10.866997521468168]
            ],
            symbol: {
              type: "simple-line",
              color: [226, 119, 40], // orange
              width: 2
            },
            Name: "Làng đại học",
            Location: "Quận Thủ Đức",
            popupTemplate: point_template_area
          }
        ],
        "polygons":[
          {
            type: "polygon",
            rings: [
              [106.80514114445627, 10.870158436990936],
              [106.80400388783394, 10.868915147546755],
              [106.8032099539655, 10.868325110065758],
              [106.80245893544132, 10.869210165849735],
              [106.80245893544132, 10.869484111155634],
              [106.8037463957685, 10.871085632526057]
            ],
            Name: "Đại học CNTT",
            Location: "Khu phố 6, P.Linh Trung, Q.Thủ Đức, Tp.Hồ Chí Minh",
            symbol: {
              type: "simple-fill",
              color: [227, 139, 79, 0.4],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_university
          },
          {
            type: "polygon",
            rings: sum,
            Name: "Đại học Nông Lâm",
            Location: "Khu phố 6, P.Linh Trung, Q.Thủ Đức, Tp.Hồ Chí Minh",
            symbol: {
              type: "simple-fill",
              color: [0, 153, 0, 0.4],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_university
          },
          {
            type: "polygon",
            rings: [
              [106.80514114445627, 10.870158436990936],
              [106.80400388783394, 10.868915147546755],
              [106.8032099539655, 10.868325110065758],
              [106.80245893544132, 10.869210165849735],
              [106.80245893544132, 10.869484111155634],
              [106.8037463957685, 10.871085632526057]
            ],
            Name: "Đại học TDTT",
            Location: "Khu phố 6, P.Linh Trung, Q.Thủ Đức, Tp.Hồ Chí Minh",
            symbol: {
              type: "simple-fill",
              color: [204, 153, 0, 0.4],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_university
          },
          {
            type: "polygon",
            rings: [
              [106.79705160206711, 10.874646879494943],
              [106.79707305973923, 10.875426555110405],
              [106.79687994069013, 10.875721566973882],
              [106.79700868672286, 10.875953361804736],
              [106.79668682164106, 10.876269445374627],
              [106.79619329518232, 10.876311589825294],
              [106.79600017613323, 10.876627673015491],
              [106.79602163380535, 10.876964828049044],
              [106.7971588904277, 10.87744948774189],
              [106.79896133488576, 10.87677517838957],
              [106.79915445393483, 10.876185156455417],
              [106.79909008091848, 10.875552988801912],
              [106.79838197773852, 10.874309721840753]
            ],
            Name: "Đại học KHTN",
            Location: "Khu phố 6, P.Linh Trung, Q.Thủ Đức, Tp.Hồ Chí Minh",
            symbol: {
              type: "simple-fill",
              color: [51, 102, 255, 0.4],
              outline: {
                color: [255, 255, 255],
                width: 1
              }
            },
            popupTemplate: point_template_university
          }

        ]
      };
      require([
        "esri/Map",
        "esri/views/MapView",
        "esri/Graphic",
        "esri/layers/GraphicsLayer"
      ], function(Map, MapView, Graphic, GraphicsLayer) {

        var map = new Map({
          basemap: "topo-vector"
        });
        map.on("load", function(){
          map.graphics.enableMouseEvents();
        });

        var view = new MapView({
          container: "viewDiv",
          map: map,
          center: [105.560532448366, 10.148417422344627],
          zoom: 11,
          highlightOptions: {
            color: "blue"
          }
        });
        var createGraphic = function (data) {
          return new Graphic({
            geometry: data,
            symbol: data.symbol,
            attributes: data,
            popupTemplate: data.popupTemplate
          });
        };
        var graphicsLayer = new GraphicsLayer();
        jsondata.points.forEach(function(data){
          graphicsLayer.add(createGraphic(data));
        });
        jsondata.lines.forEach(function(data){
          graphicsLayer.add(createGraphic(data));
        });
        jsondata.polygons.forEach(function(data){
          graphicsLayer.add(createGraphic(data));
        });
        map.add(graphicsLayer);


      });
    </script>
</head>
<body>
<div id="viewDiv"></div>
</body>
</html>